{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\CHUNGKHOANNN\\\\new\\\\giadungshop\\\\frontend\\\\src\\\\components\\\\orders\\\\OrderDetails.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport MetaData from '../layouts/MetaData';\nimport Loader from '../layouts/Loader';\nimport MenuProfile from '../user/MenuProfile';\nimport NumberFormat from 'react-number-format';\nimport { useAlert } from 'react-alert';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getOrderDetails, updateStatusOrder, undoStockProduct, clearErrors } from '../../actions/orderActions';\nimport { UPDATE_ORDER_RESET } from '../../constants/orderConstants';\nimport swal from 'sweetalert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst OrderDetails = ({\n  match\n}) => {\n  _s();\n\n  const alert = useAlert();\n  const dispatch = useDispatch();\n  const {\n    userLogin\n  } = useSelector(state => state.auth);\n  const {\n    loading,\n    error,\n    order = {}\n  } = useSelector(state => state.orderDetails);\n  const {\n    shippingInfo,\n    orderItems,\n    paymentInfo,\n    user,\n    totalPrice,\n    orderStatus,\n    paidAt,\n    deliveredAt,\n    receivedAt,\n    createdAt\n  } = order;\n  const {\n    error: errorUpdateOrder,\n    isUpdated\n  } = useSelector(state => state.order);\n  useEffect(() => {\n    dispatch(getOrderDetails(match.params.id));\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (isUpdated) {\n      alert.success('Order updated successfully');\n      dispatch({\n        type: UPDATE_ORDER_RESET\n      });\n    }\n  }, [dispatch, alert, isUpdated, error, match.params.id]);\n  const shippingDetails = shippingInfo && `${shippingInfo.address}, ${shippingInfo.city}`;\n  const isCancel = orderStatus && orderStatus === 'Processing' ? true : false;\n  const isReceive = orderStatus && orderStatus === 'Delivering' ? true : false;\n  const time = createdAt && String(createdAt).substring(0, 10);\n\n  const cancelOrder = () => {\n    for (let i = 0; i < orderItems.length; i++) {\n      let productId = orderItems[i].product;\n      let stock = orderItems[i].quantity;\n      dispatch(undoStockProduct(productId, stock));\n    }\n\n    let status = {\n      orderStatus: 'Cancelled'\n    };\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover this imaginary file!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        dispatch(updateStatusOrder(match.params.id, status));\n        swal(\"Poof! Your order has been canceled!\", {\n          icon: \"success\"\n        });\n      } else {\n        swal(\"Haha Nope!\");\n      }\n    });\n  };\n\n  const receivedOrder = () => {\n    let status = {\n      orderStatus: 'Received'\n    };\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover this imaginary file!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        dispatch(updateStatusOrder(match.params.id, status));\n        swal(\"Poof! Your imaginary file has been deleted!\", {\n          icon: \"success\"\n        });\n      } else {\n        swal(\"Your imaginary file is safe!\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MetaData, {\n      title: 'Order Details'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-2\",\n          children: /*#__PURE__*/_jsxDEV(MenuProfile, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-10\",\n          children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: '100px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: '100px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"my-orders\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-8\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"mb-4\",\n                    children: [\"Order #\", order._id]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"T\\xEAn: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 118,\n                      columnNumber: 52\n                    }, this), \" \", userLogin && userLogin.name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"S\\u0110T: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 119,\n                      columnNumber: 52\n                    }, this), \" \", shippingInfo && shippingInfo.phone]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"\\u0110\\u1ECBa ch\\u1EC9: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 120,\n                      columnNumber: 52\n                    }, this), shippingDetails]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"S\\u1ED1 l\\u01B0\\u1EE3ng:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 121,\n                      columnNumber: 52\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: totalPrice,\n                      displayType: 'text',\n                      thousandSeparator: true,\n                      prefix: 'đ '\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 121,\n                      columnNumber: 69\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Th\\u1EDDi gian:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 122,\n                      columnNumber: 52\n                    }, this), \" \", time]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"my-4\",\n                    children: \"Order Items:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"cart-item my-1\",\n                    children: orderItems && orderItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row my-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-4 col-lg-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: item.image,\n                          alt: item.name,\n                          height: \"50\",\n                          width: \"50\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 131,\n                          columnNumber: 65\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 130,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-5 col-lg-5\",\n                        children: [/*#__PURE__*/_jsxDEV(Link, {\n                          to: `/product/${item.product}`,\n                          children: /*#__PURE__*/_jsxDEV(\"p\", {\n                            children: item.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 136,\n                            columnNumber: 69\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 135,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: [\"Size: \", item.size]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 138,\n                          columnNumber: 65\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 134,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-4 col-lg-3 mt-4 mt-lg-0\",\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                            value: item.price,\n                            displayType: 'text',\n                            thousandSeparator: true,\n                            prefix: 'đ '\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 143,\n                            columnNumber: 68\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 143,\n                          columnNumber: 65\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 142,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-4 col-lg-2 mt-4 mt-lg-0\",\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: [item.quantity, \" Piece(s)\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 147,\n                          columnNumber: 65\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 146,\n                        columnNumber: 61\n                      }, this)]\n                    }, item.product, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 57\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    id: \"order_summary\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Payment Method:\", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"order-summary-values\",\n                        children: paymentInfo && paymentInfo.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 156,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 155,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Delivered at:\", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: deliveredAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\",\n                        children: deliveredAt ? `${String(deliveredAt).substring(0, 10)}` : \"Not Delivery\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 159,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 158,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Paid at:\", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: paidAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: paidAt ? `${String(paidAt).substring(0, 10)}` : \"Not Paid\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 162,\n                          columnNumber: 152\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Received at:\", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: receivedAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\",\n                        children: receivedAt ? `${String(receivedAt).substring(0, 10)}` : \"Not Received\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Order Status:\", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: order.orderStatus && String(order.orderStatus).includes('Delivering') ? \"blueColor order-summary-values\" : order.orderStatus && String(order.orderStatus).includes('Received') ? \"greenColor order-summary-values\" : order.orderStatus && String(order.orderStatus).includes('Cancelled') ? \"redColor order-summary-values\" : \"yellowColor order-summary-values\",\n                        children: orderStatus\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 168,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 167,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 178,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-block btn-order-cancel\",\n                      onClick: cancelOrder,\n                      hidden: isCancel ? false : true,\n                      children: \"Cancel Order\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-block btn-order-receive\",\n                      onClick: receivedOrder,\n                      hidden: isReceive ? false : true,\n                      children: \"Received Order\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n};\n\n_s(OrderDetails, \"t151cLNHZl9mrfp7Q2zIQyzfb4s=\", false, function () {\n  return [useAlert, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = OrderDetails;\nexport default OrderDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderDetails\");","map":{"version":3,"sources":["C:/Users/Admin/Documents/CHUNGKHOANNN/new/giadungshop/frontend/src/components/orders/OrderDetails.js"],"names":["React","Fragment","useEffect","Link","MetaData","Loader","MenuProfile","NumberFormat","useAlert","useDispatch","useSelector","getOrderDetails","updateStatusOrder","undoStockProduct","clearErrors","UPDATE_ORDER_RESET","swal","OrderDetails","match","alert","dispatch","userLogin","state","auth","loading","error","order","orderDetails","shippingInfo","orderItems","paymentInfo","user","totalPrice","orderStatus","paidAt","deliveredAt","receivedAt","createdAt","errorUpdateOrder","isUpdated","params","id","success","type","shippingDetails","address","city","isCancel","isReceive","time","String","substring","cancelOrder","i","length","productId","product","stock","quantity","status","title","text","icon","buttons","dangerMode","then","willDelete","receivedOrder","paddingTop","_id","name","phone","map","item","image","size","price","includes"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport MetaData from '../layouts/MetaData'\nimport Loader from '../layouts/Loader'\nimport MenuProfile from '../user/MenuProfile'\nimport NumberFormat from 'react-number-format'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getOrderDetails, updateStatusOrder, undoStockProduct, clearErrors } from '../../actions/orderActions'\nimport { UPDATE_ORDER_RESET } from '../../constants/orderConstants'\nimport swal from 'sweetalert'\n\nconst OrderDetails = ({ match }) => {\n\n    const alert = useAlert()\n    const dispatch = useDispatch()\n    const { userLogin } = useSelector(state => state.auth)\n    const { loading, error, order = {} } = useSelector(state => state.orderDetails)\n    const { shippingInfo, orderItems, paymentInfo, user, totalPrice, orderStatus, paidAt, deliveredAt, receivedAt, createdAt } = order\n    const { error: errorUpdateOrder, isUpdated } = useSelector(state => state.order)\n\n    useEffect(() => {\n        dispatch(getOrderDetails(match.params.id))\n\n        if (error) {\n            alert.error(error)\n            dispatch(clearErrors())\n        }\n        if (isUpdated) {\n            alert.success('Order updated successfully');\n            dispatch({ type: UPDATE_ORDER_RESET })\n        }\n    }, [dispatch, alert, isUpdated, error, match.params.id])\n\n    const shippingDetails = shippingInfo && `${shippingInfo.address}, ${shippingInfo.city}`\n    const isCancel = orderStatus && orderStatus === 'Processing' ? true : false\n    const isReceive = orderStatus && orderStatus === 'Delivering' ? true : false\n    const time = createdAt && String(createdAt).substring(0, 10)\n    const cancelOrder = () => {\n\n        for (let i = 0; i < orderItems.length; i++) {\n            let productId = orderItems[i].product\n            let stock = orderItems[i].quantity\n            dispatch(undoStockProduct(productId, stock))\n        }\n\n        let status = {\n            orderStatus: 'Cancelled'\n        }\n        swal({\n            title: \"Are you sure?\",\n            text: \"Once deleted, you will not be able to recover this imaginary file!\",\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n        })\n            .then((willDelete) => {\n                if (willDelete) {\n                    dispatch(updateStatusOrder(match.params.id, status))\n                    swal(\"Poof! Your order has been canceled!\", {\n                        icon: \"success\",\n                    })\n                } else {\n                    swal(\"Haha Nope!\")\n                }\n            })\n    }\n\n    const receivedOrder = () => {\n        let status = {\n            orderStatus: 'Received'\n        }\n        swal({\n            title: \"Are you sure?\",\n            text: \"Once deleted, you will not be able to recover this imaginary file!\",\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n        })\n            .then((willDelete) => {\n                if (willDelete) {\n                    dispatch(updateStatusOrder(match.params.id, status))\n                    swal(\"Poof! Your imaginary file has been deleted!\", {\n                        icon: \"success\",\n                    })\n                } else {\n                    swal(\"Your imaginary file is safe!\")\n                }\n            })\n    }\n\n    return (\n        <Fragment>\n            <MetaData title={'Order Details'} />\n            <div className=\"container\">\n                <div class=\"row\">\n                    <div className=\"col-2\">\n                        <MenuProfile />\n                    </div>\n                    <div className=\"col-10\">\n                        {\n                            loading ? (\n                                <>\n                                    <div style={{ paddingTop: '100px' }}></div>\n                                    <Loader />\n                                    <div style={{ paddingTop: '100px' }}></div>\n                                </>\n                            ) : (\n\n                                <Fragment>\n                                    <div className=\"my-orders\">\n                                        <div className=\"row\">\n                                            <div className=\"col-8\">\n                                                <h4 className=\"mb-4\">Order #{order._id}</h4>\n\n                                                <p><b>Tên: </b> {userLogin && userLogin.name}</p>\n                                                <p><b>SĐT: </b> {shippingInfo && shippingInfo.phone}</p>\n                                                <p><b>Địa chỉ: </b>{shippingDetails}</p>\n                                                <p><b>Số lượng:</b> <NumberFormat value={totalPrice} displayType={'text'} thousandSeparator={true} prefix={'đ '} /></p>\n                                                <p><b>Thời gian:</b> {time}</p>\n\n                                                <h5 className=\"my-4\">Order Items:</h5>\n\n                                                <hr />\n                                                <div className=\"cart-item my-1\">\n                                                    {orderItems && orderItems.map(item => (\n                                                        <div key={item.product} className=\"row my-5\">\n                                                            <div className=\"col-4 col-lg-2\">\n                                                                <img src={item.image} alt={item.name} height=\"50\" width=\"50\" />\n                                                            </div>\n\n                                                            <div className=\"col-5 col-lg-5\">\n                                                                <Link to={`/product/${item.product}`}>\n                                                                    <p>{item.name}</p>\n                                                                </Link>\n                                                                <p>Size: {item.size}</p>\n                                                            </div>\n\n\n                                                            <div className=\"col-4 col-lg-3 mt-4 mt-lg-0\">\n                                                                <p><NumberFormat value={item.price} displayType={'text'} thousandSeparator={true} prefix={'đ '} /></p>\n                                                            </div>\n\n                                                            <div className=\"col-4 col-lg-2 mt-4 mt-lg-0\">\n                                                                <p>{item.quantity} Piece(s)</p>\n                                                            </div>\n                                                        </div>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                            <div className=\"col-4\">\n                                                <div id=\"order_summary\">\n                                                    <p>Payment Method:\n                                                        <span className=\"order-summary-values\">{paymentInfo && paymentInfo.name}</span>\n                                                    </p>\n                                                    <p>Delivered at:\n                                                        <span className={deliveredAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\"}>{deliveredAt ? `${String(deliveredAt).substring(0, 10)}` : \"Not Delivery\"}</span>\n                                                    </p>\n                                                    <p>Paid at:\n                                                        <span className={paidAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\"}><span>{paidAt ? `${String(paidAt).substring(0, 10)}` : \"Not Paid\"}</span></span>\n                                                    </p>\n                                                    <p>Received at:\n                                                        <span className={receivedAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\"}>{receivedAt ? `${String(receivedAt).substring(0, 10)}` : \"Not Received\"}</span>\n                                                    </p>\n                                                    <p>Order Status:\n                                                        <span\n                                                            className={\n                                                                order.orderStatus && String(order.orderStatus).includes('Delivering') ? \"blueColor order-summary-values\"\n                                                                    : order.orderStatus && String(order.orderStatus).includes('Received') ? \"greenColor order-summary-values\"\n                                                                        : order.orderStatus && String(order.orderStatus).includes('Cancelled') ? \"redColor order-summary-values\"\n                                                                            : \"yellowColor order-summary-values\"\n                                                            }>\n                                                            {orderStatus}\n                                                        </span>\n                                                    </p>\n                                                    <hr />\n                                                    <button className=\"btn btn-block btn-order-cancel\" onClick={cancelOrder} hidden={isCancel ? false : true}>Cancel Order</button>\n                                                    <button className=\"btn btn-block btn-order-receive\" onClick={receivedOrder} hidden={isReceive ? false : true}>Received Order</button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </Fragment>\n                            )\n                        }\n                    </div>\n                </div>\n            </div>\n        </Fragment >\n    )\n}\n\nexport default OrderDetails\n"]},"metadata":{},"sourceType":"module"}