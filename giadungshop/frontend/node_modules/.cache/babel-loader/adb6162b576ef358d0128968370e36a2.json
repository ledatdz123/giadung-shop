{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\CHUNGKHOANNN\\\\new\\\\giadungshop\\\\frontend\\\\src\\\\components\\\\admin\\\\ProcessOrder.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport MetaData from '../layouts/MetaData';\nimport Loader from '../layouts/Loader';\nimport Sidebar from './Sidebar';\nimport swal from 'sweetalert';\nimport NumberFormat from 'react-number-format';\nimport { useAlert } from 'react-alert';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getOrderDetails, updateOrderByAdmin, updateStatusOrder, undoStockProduct, clearErrors } from '../../actions/orderActions';\nimport { UPDATE_ORDER_RESET } from '../../constants/orderConstants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProcessOrder = ({\n  match\n}) => {\n  _s();\n\n  const [status, setStatus] = useState('');\n  const alert = useAlert();\n  const dispatch = useDispatch();\n  const {\n    loading,\n    order = {}\n  } = useSelector(state => state.orderDetails);\n  const {\n    shippingInfo,\n    orderItems,\n    paymentInfo,\n    user,\n    totalPrice,\n    orderStatus,\n    paidAt,\n    deliveredAt,\n    receivedAt\n  } = order;\n  const {\n    error,\n    isUpdated\n  } = useSelector(state => state.order);\n  const orderId = match.params.id;\n  useEffect(() => {\n    dispatch(getOrderDetails(orderId));\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (isUpdated) {\n      alert.success('Order updated successfully');\n      dispatch({\n        type: UPDATE_ORDER_RESET\n      });\n    }\n  }, [dispatch, alert, error, isUpdated, orderId]);\n  const shippingDetails = shippingInfo && `${shippingInfo.address}, ${shippingInfo.city}`;\n  const isDelivery = orderStatus && orderStatus === 'Processing' ? true : false;\n  const isCancel = orderStatus && orderStatus === 'Processing' ? true : false;\n\n  const updateOrderHandler = () => {\n    let status = {\n      orderStatus: 'Delivering'\n    };\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover this imaginary file!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        dispatch(updateOrderByAdmin(orderId, status));\n        swal(\"Poof! Your imaginary file has been deleted!\", {\n          icon: \"success\"\n        });\n      } else {\n        swal(\"Your imaginary file is safe!\");\n      }\n    });\n  };\n\n  const cancelOrder = () => {\n    for (let i = 0; i < orderItems.length; i++) {\n      let productId = orderItems[i].product;\n      let stock = orderItems[i].quantity;\n      dispatch(undoStockProduct(productId, stock));\n    }\n\n    let status = {\n      orderStatus: 'Cancelled'\n    };\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover this imaginary file!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        dispatch(updateStatusOrder(match.params.id, status));\n        swal(\"Poof! Your imaginary file has been deleted!\", {\n          icon: \"success\"\n        });\n      } else {\n        swal(\"Your imaginary file is safe!\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MetaData, {\n      title: `Process Order # ${order && order._id}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row admin-orders\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-2\",\n        children: /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-6\",\n        children: /*#__PURE__*/_jsxDEV(Fragment, {\n          children: loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 36\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"order-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"my-4\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [\"Order #\", order._id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"mb-4\",\n              children: \"Shipping Info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 36\n              }, this), \" \", user && user.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Phone:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 36\n              }, this), \" \", shippingInfo && shippingInfo.phone]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Address:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 53\n              }, this), \" \", shippingDetails]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [\"Amount: \", /*#__PURE__*/_jsxDEV(NumberFormat, {\n                  value: totalPrice,\n                  displayType: 'text',\n                  thousandSeparator: true,\n                  prefix: ' '\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 47\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 36\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"my-4\",\n              children: \"Order Items:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-item my-1\",\n              children: orderItems && orderItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row my-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-4 col-lg-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.image,\n                    alt: item.name,\n                    height: \"50\",\n                    width: \"50\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-5 col-lg-5\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/product/${item.product}`,\n                    children: item.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-4 col-lg-3 mt-4 mt-lg-0\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                      value: item.price,\n                      displayType: 'text',\n                      thousandSeparator: true,\n                      prefix: ' '\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 52\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-4 col-lg-2 mt-4 mt-lg-0\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [item.quantity, \" Piece(s)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 45\n                }, this)]\n              }, item.product, true, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-3 my-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"order_summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Payment Method:\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"order-summary-values\",\n              children: paymentInfo && paymentInfo.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Delivered at:\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: deliveredAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\",\n              children: deliveredAt ? `${String(deliveredAt).substring(0, 10)}` : \"Not Delivery\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Paid at:\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: paidAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: paidAt ? `${String(paidAt).substring(0, 10)}` : \"Not Paid\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 124\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Received at:\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: receivedAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\",\n              children: receivedAt ? `${String(receivedAt).substring(0, 10)}` : \"Not Received\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Order Status:\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: order.orderStatus && String(order.orderStatus).includes('Delivering') ? \"blueColor order-summary-values\" : order.orderStatus && String(order.orderStatus).includes('Received') ? \"greenColor order-summary-values\" : order.orderStatus && String(order.orderStatus).includes('Cancelled') ? \"redColor order-summary-values\" : \"yellowColor order-summary-values\",\n              children: orderStatus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-block btn-order-cancel\",\n            onClick: cancelOrder,\n            hidden: isCancel ? false : true,\n            children: \"Cancel Order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-block btn-order-receive\",\n            onClick: updateOrderHandler,\n            hidden: isDelivery ? false : true,\n            children: \"Delivery Order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProcessOrder, \"ZH7u4i0afun9sk1EEy+1P/ZMDdM=\", false, function () {\n  return [useAlert, useDispatch, useSelector, useSelector];\n});\n\n_c = ProcessOrder;\nexport default ProcessOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProcessOrder\");","map":{"version":3,"sources":["C:/Users/Admin/Documents/CHUNGKHOANNN/new/giadungshop/frontend/src/components/admin/ProcessOrder.js"],"names":["React","Fragment","useState","useEffect","Link","MetaData","Loader","Sidebar","swal","NumberFormat","useAlert","useDispatch","useSelector","getOrderDetails","updateOrderByAdmin","updateStatusOrder","undoStockProduct","clearErrors","UPDATE_ORDER_RESET","ProcessOrder","match","status","setStatus","alert","dispatch","loading","order","state","orderDetails","shippingInfo","orderItems","paymentInfo","user","totalPrice","orderStatus","paidAt","deliveredAt","receivedAt","error","isUpdated","orderId","params","id","success","type","shippingDetails","address","city","isDelivery","isCancel","updateOrderHandler","title","text","icon","buttons","dangerMode","then","willDelete","cancelOrder","i","length","productId","product","stock","quantity","_id","name","phone","map","item","image","price","String","substring","includes"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport MetaData from '../layouts/MetaData'\nimport Loader from '../layouts/Loader'\nimport Sidebar from './Sidebar'\nimport swal from 'sweetalert'\nimport NumberFormat from 'react-number-format'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getOrderDetails, updateOrderByAdmin, updateStatusOrder, undoStockProduct, clearErrors } from '../../actions/orderActions'\nimport { UPDATE_ORDER_RESET } from '../../constants/orderConstants'\n\nconst ProcessOrder = ({ match }) => {\n\n    const [status, setStatus] = useState('');\n\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { loading, order = {} } = useSelector(state => state.orderDetails)\n    const { shippingInfo, orderItems, paymentInfo, user, totalPrice, orderStatus, paidAt, deliveredAt, receivedAt } = order\n    const { error, isUpdated } = useSelector(state => state.order)\n\n    const orderId = match.params.id;\n\n    useEffect(() => {\n\n        dispatch(getOrderDetails(orderId))\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n\n        if (isUpdated) {\n            alert.success('Order updated successfully');\n            dispatch({ type: UPDATE_ORDER_RESET })\n        }\n\n    }, [dispatch, alert, error, isUpdated, orderId])\n\n\n\n    const shippingDetails = shippingInfo && `${shippingInfo.address}, ${shippingInfo.city}`\n    const isDelivery = orderStatus && orderStatus === 'Processing' ? true : false\n    const isCancel = orderStatus && orderStatus === 'Processing' ? true : false\n\n    const updateOrderHandler = () => {\n        let status = {\n            orderStatus: 'Delivering'\n        }\n        swal({\n            title: \"Are you sure?\",\n            text: \"Once deleted, you will not be able to recover this imaginary file!\",\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n        })\n            .then((willDelete) => {\n                if (willDelete) {\n                    dispatch(updateOrderByAdmin(orderId, status))\n                    swal(\"Poof! Your imaginary file has been deleted!\", {\n                        icon: \"success\",\n                    })\n                } else {\n                    swal(\"Your imaginary file is safe!\")\n                }\n            })\n    }\n\n    const cancelOrder = () => {\n        for (let i = 0; i < orderItems.length; i++) {\n            let productId = orderItems[i].product\n            let stock = orderItems[i].quantity\n            dispatch(undoStockProduct(productId, stock))\n        }\n\n        let status = {\n            orderStatus: 'Cancelled'\n        }\n        swal({\n            title: \"Are you sure?\",\n            text: \"Once deleted, you will not be able to recover this imaginary file!\",\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n        })\n            .then((willDelete) => {\n                if (willDelete) {\n                    dispatch(updateStatusOrder(match.params.id, status))\n                    swal(\"Poof! Your imaginary file has been deleted!\", {\n                        icon: \"success\",\n                    })\n                } else {\n                    swal(\"Your imaginary file is safe!\")\n                }\n            })\n    }\n\n    return (\n        <Fragment>\n            <MetaData title={`Process Order # ${order && order._id}`} />\n            <div className=\"row admin-orders\">\n                <div className=\"col-12 col-md-2\">\n                    <Sidebar />\n                </div>\n\n                <div className=\"col-12 col-md-6\">\n                    <Fragment>\n                        {loading ? <Loader /> : (\n                            <div className=\"order-details\">\n                                <div className=\"my-4\">\n                                    <h3>Order #{order._id}</h3>\n                                </div>\n                                <h4 className=\"mb-4\">Shipping Info</h4>\n                                <p><b>Name:</b> {user && user.name}</p>\n                                <p><b>Phone:</b> {shippingInfo && shippingInfo.phone}</p>\n                                <p className=\"mb-4\"><b>Address:</b> {shippingDetails}</p>\n                                <p><b>Amount: <NumberFormat value={totalPrice} displayType={'text'} thousandSeparator={true} prefix={' '} /></b></p>\n\n                                <hr />\n                                <h4 className=\"my-4\">Order Items:</h4>\n                                <div className=\"cart-item my-1\">\n                                    {orderItems && orderItems.map(item => (\n                                        <div key={item.product} className=\"row my-5\">\n                                            <div className=\"col-4 col-lg-2\">\n                                                <img src={item.image} alt={item.name} height=\"50\" width=\"50\" />\n                                            </div>\n\n                                            <div className=\"col-5 col-lg-5\">\n                                                <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                            </div>\n\n\n                                            <div className=\"col-4 col-lg-3 mt-4 mt-lg-0\">\n                                                <p><NumberFormat value={item.price} displayType={'text'} thousandSeparator={true} prefix={' '} /></p>\n                                            </div>\n\n                                            <div className=\"col-4 col-lg-2 mt-4 mt-lg-0\">\n                                                <p>{item.quantity} Piece(s)</p>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                                <hr />\n                            </div>\n\n\n                        )}\n                    </Fragment>\n                </div>\n                <div className=\"col-12 col-md-3 my-4\">\n                    <div id=\"order_summary\">\n                        <p>Payment Method:\n                            <span className=\"order-summary-values\">{paymentInfo && paymentInfo.name}</span>\n                        </p>\n                        <p>Delivered at:\n                            <span className={deliveredAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\"}>{deliveredAt ? `${String(deliveredAt).substring(0, 10)}` : \"Not Delivery\"}</span>\n                        </p>\n                        <p>Paid at:\n                            <span className={paidAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\"}><span>{paidAt ? `${String(paidAt).substring(0, 10)}` : \"Not Paid\"}</span></span>\n                        </p>\n                        <p>Received at:\n                            <span className={receivedAt ? \"greenColor order-summary-values\" : \"redColor order-summary-values\"}>{receivedAt ? `${String(receivedAt).substring(0, 10)}` : \"Not Received\"}</span>\n                        </p>\n                        <p>Order Status:\n                            <span\n                                className={\n                                    order.orderStatus && String(order.orderStatus).includes('Delivering') ? \"blueColor order-summary-values\"\n                                        : order.orderStatus && String(order.orderStatus).includes('Received') ? \"greenColor order-summary-values\"\n                                            : order.orderStatus && String(order.orderStatus).includes('Cancelled') ? \"redColor order-summary-values\"\n                                                : \"yellowColor order-summary-values\"\n                                }>\n                                {orderStatus}\n                            </span>\n                        </p>\n                        <hr />\n\n                        <button className=\"btn btn-block btn-order-cancel\" onClick={cancelOrder} hidden={isCancel ? false : true}>Cancel Order</button>\n                        <button className=\"btn btn-block btn-order-receive\" onClick={updateOrderHandler} hidden={isDelivery ? false : true}>Delivery Order</button>\n                    </div>\n                </div>\n            </div>\n\n        </Fragment>\n    )\n}\n\nexport default ProcessOrder\n"]},"metadata":{},"sourceType":"module"}